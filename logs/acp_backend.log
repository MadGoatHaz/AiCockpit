2025-05-25 23:23:01,208 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:23:01,404 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-25 23:23:01,446 - acp_backend.core.agent_config_handler - ERROR - Error reading/decoding global agent config 'a2574451-d1c5-4ba8-a293-a582c31f6979' from /tmp/pytest-of-g/pytest-9/test_corrupted_json_file0/_test_global_agent_configs/a2574451-d1c5-4ba8-a293-a582c31f6979.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 98, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-25 23:23:01,449 - acp_backend.core.agent_config_handler - ERROR - Mismatch: agent_id in file != requested for global agent e50ec22b-a07a-451d-b81b-5cc7632aabc8. Path: /tmp/pytest-of-g/pytest-9/test_mismatched_agent_id_in_fi0/_test_global_agent_configs/e50ec22b-a07a-451d-b81b-5cc7632aabc8.json
2025-05-25 23:23:01,468 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='..', normalized='..'.
2025-05-25 23:23:01,472 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='../another_session', normalized='../another_session'.
2025-05-25 23:23:01,475 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='/../another_session', normalized='../another_session'.
2025-05-25 23:23:01,478 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='folder/../../../../etc/passwd', normalized='../../../etc/passwd'.
2025-05-25 23:23:01,488 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory ./test_acp_work_sessions: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 25, in __init__
    os.makedirs(self.sessions_base_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-25 23:23:01,503 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 12345678-1234-1234-1234-1234567890ab at ./test_acp_work_sessions/12345678-1234-1234-1234-1234567890ab/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 77, in create_session
    json.dump(session_data.model_dump(mode="json"), f, indent=4)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-25 23:23:01,506 - acp_backend.core.session_handler - ERROR - Session folder ./test_acp_work_sessions/abcdef01-abcd-ef01-abcd-ef0123456789 already exists for new UUID abcdef01-abcd-ef01-abcd-ef0123456789. This is highly unlikely.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 56, in create_session
    os.makedirs(session_folder, exist_ok=False)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1232, in _execute_mock_call
    raise result
FileExistsError: Session folder already exists
2025-05-25 23:23:01,509 - acp_backend.core.session_handler - WARNING - Sessions base directory ./test_acp_work_sessions does not exist or not a directory. Returning empty list.
2025-05-25 23:23:01,529 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..id/'
2025-05-25 23:23:01,542 - acp_backend.core.session_handler - WARNING - Cannot update session. Manifest not found for session_id: non_existent_for_update_ok_id
2025-05-25 23:23:01,544 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..update..id/'
2025-05-25 23:23:01,548 - acp_backend.core.session_handler - WARNING - Attempted to delete session i_dont_exist_for_delete_ok_id, but folder ./test_acp_work_sessions/i_dont_exist_for_delete_ok_id does not exist.
2025-05-25 23:23:01,551 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid/delete/id'
2025-05-25 23:23:01,553 - acp_backend.core.session_handler - ERROR - Attempted to delete session file_masquerading_as_session_ok_id, but path ./test_acp_work_sessions/file_masquerading_as_session_ok_id is not a directory.
2025-05-25 23:23:01,555 - acp_backend.core.session_handler - ERROR - Error deleting session folder ./test_acp_work_sessions/os_error_delete_session_ok_id for session os_error_delete_session_ok_id: Disk full
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 199, in delete_session
    shutil.rmtree(session_folder)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Disk full
2025-05-25 23:24:04,325 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:24:04,523 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-25 23:24:04,571 - acp_backend.core.agent_config_handler - ERROR - Error reading/decoding global agent config 'bc7c987b-58c3-4d30-9a90-369481b7fb45' from /tmp/pytest-of-g/pytest-10/test_corrupted_json_file0/_test_global_agent_configs/bc7c987b-58c3-4d30-9a90-369481b7fb45.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 98, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-25 23:24:04,576 - acp_backend.core.agent_config_handler - ERROR - Mismatch: agent_id in file != requested for global agent 82e11395-2d61-40d9-8c2d-5769d72fd54c. Path: /tmp/pytest-of-g/pytest-10/test_mismatched_agent_id_in_fi0/_test_global_agent_configs/82e11395-2d61-40d9-8c2d-5769d72fd54c.json
2025-05-25 23:24:04,597 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='..', normalized='..'.
2025-05-25 23:24:04,599 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='../another_session', normalized='../another_session'.
2025-05-25 23:24:04,601 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='/../another_session', normalized='../another_session'.
2025-05-25 23:24:04,604 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='folder/../../../../etc/passwd', normalized='../../../etc/passwd'.
2025-05-25 23:24:04,622 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory ./test_acp_work_sessions: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 25, in __init__
    os.makedirs(self.sessions_base_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-25 23:24:04,637 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 12345678-1234-1234-1234-1234567890ab at ./test_acp_work_sessions/12345678-1234-1234-1234-1234567890ab/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 77, in create_session
    json.dump(session_data.model_dump(mode="json"), f, indent=4)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-25 23:24:04,643 - acp_backend.core.session_handler - ERROR - Session folder ./test_acp_work_sessions/abcdef01-abcd-ef01-abcd-ef0123456789 already exists for new UUID abcdef01-abcd-ef01-abcd-ef0123456789. This is highly unlikely.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 56, in create_session
    os.makedirs(session_folder, exist_ok=False)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1232, in _execute_mock_call
    raise result
FileExistsError: Session folder already exists
2025-05-25 23:24:04,647 - acp_backend.core.session_handler - WARNING - Sessions base directory ./test_acp_work_sessions does not exist or not a directory. Returning empty list.
2025-05-25 23:24:04,673 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..id/'
2025-05-25 23:24:04,686 - acp_backend.core.session_handler - WARNING - Cannot update session. Manifest not found for session_id: non_existent_for_update_ok_id
2025-05-25 23:24:04,688 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..update..id/'
2025-05-25 23:24:04,694 - acp_backend.core.session_handler - WARNING - Attempted to delete session i_dont_exist_for_delete_ok_id, but folder ./test_acp_work_sessions/i_dont_exist_for_delete_ok_id does not exist.
2025-05-25 23:24:04,696 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid/delete/id'
2025-05-25 23:24:04,700 - acp_backend.core.session_handler - ERROR - Attempted to delete session file_masquerading_as_session_ok_id, but path ./test_acp_work_sessions/file_masquerading_as_session_ok_id is not a directory.
2025-05-25 23:24:04,703 - acp_backend.core.session_handler - ERROR - Error deleting session folder ./test_acp_work_sessions/os_error_delete_session_ok_id for session os_error_delete_session_ok_id: Disk full
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 199, in delete_session
    shutil.rmtree(session_folder)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Disk full
2025-05-25 23:28:53,604 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:28:53,797 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-25 23:28:53,851 - acp_backend.core.agent_config_handler - ERROR - Error reading/decoding global agent config 'b5f1e9ca-9eaa-4a65-b430-76ee68231af1' from /tmp/pytest-of-g/pytest-11/test_corrupted_json_file0/_test_global_agent_configs/b5f1e9ca-9eaa-4a65-b430-76ee68231af1.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 98, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-25 23:28:53,856 - acp_backend.core.agent_config_handler - ERROR - Mismatch: agent_id in file != requested for global agent b1b4cfaf-c2ac-4317-92a0-b98f54f81792. Path: /tmp/pytest-of-g/pytest-11/test_mismatched_agent_id_in_fi0/_test_global_agent_configs/b1b4cfaf-c2ac-4317-92a0-b98f54f81792.json
2025-05-25 23:28:53,879 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='..', normalized='..'.
2025-05-25 23:28:53,882 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='../another_session', normalized='../another_session'.
2025-05-25 23:28:53,884 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='/../another_session', normalized='../another_session'.
2025-05-25 23:28:53,887 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='folder/../../../../etc/passwd', normalized='../../../etc/passwd'.
2025-05-25 23:28:53,895 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory ./test_acp_work_sessions: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 25, in __init__
    os.makedirs(self.sessions_base_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-25 23:28:53,907 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 12345678-1234-1234-1234-1234567890ab at ./test_acp_work_sessions/12345678-1234-1234-1234-1234567890ab/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 77, in create_session
    json.dump(session_data.model_dump(mode="json"), f, indent=4)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-25 23:28:53,911 - acp_backend.core.session_handler - ERROR - Session folder ./test_acp_work_sessions/abcdef01-abcd-ef01-abcd-ef0123456789 already exists for new UUID abcdef01-abcd-ef01-abcd-ef0123456789. This is highly unlikely.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 56, in create_session
    os.makedirs(session_folder, exist_ok=False)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1232, in _execute_mock_call
    raise result
FileExistsError: Session folder already exists
2025-05-25 23:28:53,914 - acp_backend.core.session_handler - WARNING - Sessions base directory ./test_acp_work_sessions does not exist or not a directory. Returning empty list.
2025-05-25 23:28:53,937 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..id/'
2025-05-25 23:28:53,949 - acp_backend.core.session_handler - WARNING - Cannot update session. Manifest not found for session_id: non_existent_for_update_ok_id
2025-05-25 23:28:53,951 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..update..id/'
2025-05-25 23:28:53,955 - acp_backend.core.session_handler - WARNING - Attempted to delete session i_dont_exist_for_delete_ok_id, but folder ./test_acp_work_sessions/i_dont_exist_for_delete_ok_id does not exist.
2025-05-25 23:28:53,957 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid/delete/id'
2025-05-25 23:28:53,959 - acp_backend.core.session_handler - ERROR - Attempted to delete session file_masquerading_as_session_ok_id, but path ./test_acp_work_sessions/file_masquerading_as_session_ok_id is not a directory.
2025-05-25 23:28:53,962 - acp_backend.core.session_handler - ERROR - Error deleting session folder ./test_acp_work_sessions/os_error_delete_session_ok_id for session os_error_delete_session_ok_id: Disk full
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 199, in delete_session
    shutil.rmtree(session_folder)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Disk full
2025-05-25 23:30:23,766 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:30:23,974 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-25 23:30:24,018 - acp_backend.core.agent_config_handler - ERROR - Error reading/decoding global agent config '19b8ccff-0210-49ee-9a4f-40dba33863fb' from /tmp/pytest-of-g/pytest-12/test_corrupted_json_file0/_test_global_agent_configs/19b8ccff-0210-49ee-9a4f-40dba33863fb.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 98, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-25 23:30:24,022 - acp_backend.core.agent_config_handler - ERROR - Mismatch: agent_id in file != requested for global agent c91d7364-09bb-449a-b744-04179db83626. Path: /tmp/pytest-of-g/pytest-12/test_mismatched_agent_id_in_fi0/_test_global_agent_configs/c91d7364-09bb-449a-b744-04179db83626.json
2025-05-25 23:30:24,041 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='..', normalized='..'.
2025-05-25 23:30:24,048 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='../another_session', normalized='../another_session'.
2025-05-25 23:30:24,051 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='/../another_session', normalized='../another_session'.
2025-05-25 23:30:24,054 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='folder/../../../../etc/passwd', normalized='../../../etc/passwd'.
2025-05-25 23:30:24,061 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory ./test_acp_work_sessions: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 25, in __init__
    os.makedirs(self.sessions_base_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-25 23:30:24,075 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 12345678-1234-1234-1234-1234567890ab at ./test_acp_work_sessions/12345678-1234-1234-1234-1234567890ab/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 77, in create_session
    json.dump(session_data.model_dump(mode="json"), f, indent=4)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-25 23:30:24,079 - acp_backend.core.session_handler - ERROR - Session folder ./test_acp_work_sessions/abcdef01-abcd-ef01-abcd-ef0123456789 already exists for new UUID abcdef01-abcd-ef01-abcd-ef0123456789. This is highly unlikely.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 56, in create_session
    os.makedirs(session_folder, exist_ok=False)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1232, in _execute_mock_call
    raise result
FileExistsError: Session folder already exists
2025-05-25 23:30:24,083 - acp_backend.core.session_handler - WARNING - Sessions base directory ./test_acp_work_sessions does not exist or not a directory. Returning empty list.
2025-05-25 23:30:24,105 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..id/'
2025-05-25 23:30:24,117 - acp_backend.core.session_handler - WARNING - Cannot update session. Manifest not found for session_id: non_existent_for_update_ok_id
2025-05-25 23:30:24,119 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..update..id/'
2025-05-25 23:30:24,124 - acp_backend.core.session_handler - WARNING - Attempted to delete session i_dont_exist_for_delete_ok_id, but folder ./test_acp_work_sessions/i_dont_exist_for_delete_ok_id does not exist.
2025-05-25 23:30:24,126 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid/delete/id'
2025-05-25 23:30:24,128 - acp_backend.core.session_handler - ERROR - Attempted to delete session file_masquerading_as_session_ok_id, but path ./test_acp_work_sessions/file_masquerading_as_session_ok_id is not a directory.
2025-05-25 23:30:24,131 - acp_backend.core.session_handler - ERROR - Error deleting session folder ./test_acp_work_sessions/os_error_delete_session_ok_id for session os_error_delete_session_ok_id: Disk full
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 199, in delete_session
    shutil.rmtree(session_folder)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Disk full
2025-05-25 23:31:30,334 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:31:30,763 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-25 23:31:30,806 - acp_backend.core.agent_config_handler - ERROR - Error reading/decoding global agent config 'aea7ce7c-1de2-4e20-a11a-7f44205eb73c' from /tmp/pytest-of-g/pytest-13/test_corrupted_json_file0/_test_global_agent_configs/aea7ce7c-1de2-4e20-a11a-7f44205eb73c.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 98, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-25 23:31:30,811 - acp_backend.core.agent_config_handler - ERROR - Mismatch: agent_id in file != requested for global agent 585f143d-00b3-43ed-8243-900675f415ee. Path: /tmp/pytest-of-g/pytest-13/test_mismatched_agent_id_in_fi0/_test_global_agent_configs/585f143d-00b3-43ed-8243-900675f415ee.json
2025-05-25 23:31:30,831 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='..', normalized='..'.
2025-05-25 23:31:30,833 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='../another_session', normalized='../another_session'.
2025-05-25 23:31:30,835 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='/../another_session', normalized='../another_session'.
2025-05-25 23:31:30,838 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='folder/../../../../etc/passwd', normalized='../../../etc/passwd'.
2025-05-25 23:31:30,846 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory ./test_acp_work_sessions: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 25, in __init__
    os.makedirs(self.sessions_base_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-25 23:31:30,858 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 12345678-1234-1234-1234-1234567890ab at ./test_acp_work_sessions/12345678-1234-1234-1234-1234567890ab/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 77, in create_session
    json.dump(session_data.model_dump(mode="json"), f, indent=4)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-25 23:31:30,862 - acp_backend.core.session_handler - ERROR - Session folder ./test_acp_work_sessions/abcdef01-abcd-ef01-abcd-ef0123456789 already exists for new UUID abcdef01-abcd-ef01-abcd-ef0123456789. This is highly unlikely.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 56, in create_session
    os.makedirs(session_folder, exist_ok=False)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1232, in _execute_mock_call
    raise result
FileExistsError: Session folder already exists
2025-05-25 23:31:30,866 - acp_backend.core.session_handler - WARNING - Sessions base directory ./test_acp_work_sessions does not exist or not a directory. Returning empty list.
2025-05-25 23:31:30,896 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..id/'
2025-05-25 23:31:30,911 - acp_backend.core.session_handler - WARNING - Cannot update session. Manifest not found for session_id: non_existent_for_update_ok_id
2025-05-25 23:31:30,913 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..update..id/'
2025-05-25 23:31:30,919 - acp_backend.core.session_handler - WARNING - Attempted to delete session i_dont_exist_for_delete_ok_id, but folder ./test_acp_work_sessions/i_dont_exist_for_delete_ok_id does not exist.
2025-05-25 23:31:30,922 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid/delete/id'
2025-05-25 23:31:30,925 - acp_backend.core.session_handler - ERROR - Attempted to delete session file_masquerading_as_session_ok_id, but path ./test_acp_work_sessions/file_masquerading_as_session_ok_id is not a directory.
2025-05-25 23:31:30,927 - acp_backend.core.session_handler - ERROR - Error deleting session folder ./test_acp_work_sessions/os_error_delete_session_ok_id for session os_error_delete_session_ok_id: Disk full
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 199, in delete_session
    shutil.rmtree(session_folder)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Disk full
2025-05-25 23:32:39,538 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:32:40,227 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-25 23:32:40,270 - acp_backend.core.agent_config_handler - ERROR - Error reading/decoding global agent config '313578a1-85c3-4ffb-9415-774c4238ed21' from /tmp/pytest-of-g/pytest-14/test_corrupted_json_file0/_test_global_agent_configs/313578a1-85c3-4ffb-9415-774c4238ed21.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 98, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-25 23:32:40,274 - acp_backend.core.agent_config_handler - ERROR - Mismatch: agent_id in file != requested for global agent be2ee3f4-24df-486b-984d-7cccdf9bc120. Path: /tmp/pytest-of-g/pytest-14/test_mismatched_agent_id_in_fi0/_test_global_agent_configs/be2ee3f4-24df-486b-984d-7cccdf9bc120.json
2025-05-25 23:32:40,297 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='..', normalized='..'.
2025-05-25 23:32:40,300 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='../another_session', normalized='../another_session'.
2025-05-25 23:32:40,302 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='/../another_session', normalized='../another_session'.
2025-05-25 23:32:40,306 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='folder/../../../../etc/passwd', normalized='../../../etc/passwd'.
2025-05-25 23:32:40,316 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory ./test_acp_work_sessions: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 25, in __init__
    os.makedirs(self.sessions_base_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-25 23:32:40,331 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 12345678-1234-1234-1234-1234567890ab at ./test_acp_work_sessions/12345678-1234-1234-1234-1234567890ab/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 77, in create_session
    json.dump(session_data.model_dump(mode="json"), f, indent=4)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-25 23:32:40,336 - acp_backend.core.session_handler - ERROR - Session folder ./test_acp_work_sessions/abcdef01-abcd-ef01-abcd-ef0123456789 already exists for new UUID abcdef01-abcd-ef01-abcd-ef0123456789. This is highly unlikely.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 56, in create_session
    os.makedirs(session_folder, exist_ok=False)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1232, in _execute_mock_call
    raise result
FileExistsError: Session folder already exists
2025-05-25 23:32:40,339 - acp_backend.core.session_handler - WARNING - Sessions base directory ./test_acp_work_sessions does not exist or not a directory. Returning empty list.
2025-05-25 23:32:40,362 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..id/'
2025-05-25 23:32:40,376 - acp_backend.core.session_handler - WARNING - Cannot update session. Manifest not found for session_id: non_existent_for_update_ok_id
2025-05-25 23:32:40,378 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..update..id/'
2025-05-25 23:32:40,383 - acp_backend.core.session_handler - WARNING - Attempted to delete session i_dont_exist_for_delete_ok_id, but folder ./test_acp_work_sessions/i_dont_exist_for_delete_ok_id does not exist.
2025-05-25 23:32:40,385 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid/delete/id'
2025-05-25 23:32:40,386 - acp_backend.core.session_handler - ERROR - Attempted to delete session file_masquerading_as_session_ok_id, but path ./test_acp_work_sessions/file_masquerading_as_session_ok_id is not a directory.
2025-05-25 23:32:40,389 - acp_backend.core.session_handler - ERROR - Error deleting session folder ./test_acp_work_sessions/os_error_delete_session_ok_id for session os_error_delete_session_ok_id: Disk full
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 199, in delete_session
    shutil.rmtree(session_folder)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Disk full
2025-05-25 23:32:51,600 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:32:52,368 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-25 23:32:52,418 - acp_backend.core.agent_config_handler - ERROR - Error reading/decoding global agent config 'ac04cbf9-1d14-4769-9a70-19ebcb15b5c8' from /tmp/pytest-of-g/pytest-15/test_corrupted_json_file0/_test_global_agent_configs/ac04cbf9-1d14-4769-9a70-19ebcb15b5c8.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 98, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-25 23:32:52,424 - acp_backend.core.agent_config_handler - ERROR - Mismatch: agent_id in file != requested for global agent 5f5598f8-1862-427f-b067-fe8eff65c836. Path: /tmp/pytest-of-g/pytest-15/test_mismatched_agent_id_in_fi0/_test_global_agent_configs/5f5598f8-1862-427f-b067-fe8eff65c836.json
2025-05-25 23:32:52,448 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='..', normalized='..'.
2025-05-25 23:32:52,451 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='../another_session', normalized='../another_session'.
2025-05-25 23:32:52,453 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='/../another_session', normalized='../another_session'.
2025-05-25 23:32:52,456 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='folder/../../../../etc/passwd', normalized='../../../etc/passwd'.
2025-05-25 23:32:52,464 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory ./test_acp_work_sessions: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 25, in __init__
    os.makedirs(self.sessions_base_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-25 23:32:52,477 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 12345678-1234-1234-1234-1234567890ab at ./test_acp_work_sessions/12345678-1234-1234-1234-1234567890ab/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 77, in create_session
    json.dump(session_data.model_dump(mode="json"), f, indent=4)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-25 23:32:52,481 - acp_backend.core.session_handler - ERROR - Session folder ./test_acp_work_sessions/abcdef01-abcd-ef01-abcd-ef0123456789 already exists for new UUID abcdef01-abcd-ef01-abcd-ef0123456789. This is highly unlikely.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 56, in create_session
    os.makedirs(session_folder, exist_ok=False)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1232, in _execute_mock_call
    raise result
FileExistsError: Session folder already exists
2025-05-25 23:32:52,484 - acp_backend.core.session_handler - WARNING - Sessions base directory ./test_acp_work_sessions does not exist or not a directory. Returning empty list.
2025-05-25 23:32:52,507 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..id/'
2025-05-25 23:32:52,521 - acp_backend.core.session_handler - WARNING - Cannot update session. Manifest not found for session_id: non_existent_for_update_ok_id
2025-05-25 23:32:52,523 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..update..id/'
2025-05-25 23:32:52,528 - acp_backend.core.session_handler - WARNING - Attempted to delete session i_dont_exist_for_delete_ok_id, but folder ./test_acp_work_sessions/i_dont_exist_for_delete_ok_id does not exist.
2025-05-25 23:32:52,530 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid/delete/id'
2025-05-25 23:32:52,533 - acp_backend.core.session_handler - ERROR - Attempted to delete session file_masquerading_as_session_ok_id, but path ./test_acp_work_sessions/file_masquerading_as_session_ok_id is not a directory.
2025-05-25 23:32:52,535 - acp_backend.core.session_handler - ERROR - Error deleting session folder ./test_acp_work_sessions/os_error_delete_session_ok_id for session os_error_delete_session_ok_id: Disk full
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 199, in delete_session
    shutil.rmtree(session_folder)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Disk full
2025-05-25 23:34:34,680 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:34:35,468 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-25 23:34:35,511 - acp_backend.core.agent_config_handler - ERROR - Error reading/decoding global agent config 'f200e27b-ab2f-4aff-a697-a10999f2643f' from /tmp/pytest-of-g/pytest-16/test_corrupted_json_file0/_test_global_agent_configs/f200e27b-ab2f-4aff-a697-a10999f2643f.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 98, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-25 23:34:35,516 - acp_backend.core.agent_config_handler - ERROR - Mismatch: agent_id in file != requested for global agent 077f1827-a80e-462d-9808-7e76b2b60e91. Path: /tmp/pytest-of-g/pytest-16/test_mismatched_agent_id_in_fi0/_test_global_agent_configs/077f1827-a80e-462d-9808-7e76b2b60e91.json
2025-05-25 23:34:35,536 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='..', normalized='..'.
2025-05-25 23:34:35,539 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='../another_session', normalized='../another_session'.
2025-05-25 23:34:35,541 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='/../another_session', normalized='../another_session'.
2025-05-25 23:34:35,544 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='folder/../../../../etc/passwd', normalized='../../../etc/passwd'.
2025-05-25 23:34:35,555 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory ./test_acp_work_sessions: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 25, in __init__
    os.makedirs(self.sessions_base_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-25 23:34:35,569 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 12345678-1234-1234-1234-1234567890ab at ./test_acp_work_sessions/12345678-1234-1234-1234-1234567890ab/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 77, in create_session
    json.dump(session_data.model_dump(mode="json"), f, indent=4)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-25 23:34:35,573 - acp_backend.core.session_handler - ERROR - Session folder ./test_acp_work_sessions/abcdef01-abcd-ef01-abcd-ef0123456789 already exists for new UUID abcdef01-abcd-ef01-abcd-ef0123456789. This is highly unlikely.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 56, in create_session
    os.makedirs(session_folder, exist_ok=False)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1232, in _execute_mock_call
    raise result
FileExistsError: Session folder already exists
2025-05-25 23:34:35,576 - acp_backend.core.session_handler - WARNING - Sessions base directory ./test_acp_work_sessions does not exist or not a directory. Returning empty list.
2025-05-25 23:34:35,602 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..id/'
2025-05-25 23:34:35,619 - acp_backend.core.session_handler - WARNING - Cannot update session. Manifest not found for session_id: non_existent_for_update_ok_id
2025-05-25 23:34:35,622 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..update..id/'
2025-05-25 23:34:35,628 - acp_backend.core.session_handler - WARNING - Attempted to delete session i_dont_exist_for_delete_ok_id, but folder ./test_acp_work_sessions/i_dont_exist_for_delete_ok_id does not exist.
2025-05-25 23:34:35,631 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid/delete/id'
2025-05-25 23:34:35,634 - acp_backend.core.session_handler - ERROR - Attempted to delete session file_masquerading_as_session_ok_id, but path ./test_acp_work_sessions/file_masquerading_as_session_ok_id is not a directory.
2025-05-25 23:34:35,637 - acp_backend.core.session_handler - ERROR - Error deleting session folder ./test_acp_work_sessions/os_error_delete_session_ok_id for session os_error_delete_session_ok_id: Disk full
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 199, in delete_session
    shutil.rmtree(session_folder)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Disk full
2025-05-25 23:35:50,779 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:35:51,534 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-25 23:35:51,575 - acp_backend.core.agent_config_handler - ERROR - Error reading/decoding global agent config '85bd0e91-577f-497d-93c4-e7139136f3b9' from /tmp/pytest-of-g/pytest-17/test_corrupted_json_file0/_test_global_agent_configs/85bd0e91-577f-497d-93c4-e7139136f3b9.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 98, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-25 23:35:51,580 - acp_backend.core.agent_config_handler - ERROR - Mismatch: agent_id in file != requested for global agent 2279838a-c5b9-4986-a517-3f989217cc79. Path: /tmp/pytest-of-g/pytest-17/test_mismatched_agent_id_in_fi0/_test_global_agent_configs/2279838a-c5b9-4986-a517-3f989217cc79.json
2025-05-25 23:35:51,601 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='..', normalized='..'.
2025-05-25 23:35:51,603 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='../another_session', normalized='../another_session'.
2025-05-25 23:35:51,605 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='/../another_session', normalized='../another_session'.
2025-05-25 23:35:51,608 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='folder/../../../../etc/passwd', normalized='../../../etc/passwd'.
2025-05-25 23:35:51,616 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory ./test_acp_work_sessions: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 25, in __init__
    os.makedirs(self.sessions_base_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-25 23:35:51,629 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 12345678-1234-1234-1234-1234567890ab at ./test_acp_work_sessions/12345678-1234-1234-1234-1234567890ab/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 77, in create_session
    json.dump(session_data.model_dump(mode="json"), f, indent=4)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-25 23:35:51,633 - acp_backend.core.session_handler - ERROR - Session folder ./test_acp_work_sessions/abcdef01-abcd-ef01-abcd-ef0123456789 already exists for new UUID abcdef01-abcd-ef01-abcd-ef0123456789. This is highly unlikely.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 56, in create_session
    os.makedirs(session_folder, exist_ok=False)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1232, in _execute_mock_call
    raise result
FileExistsError: Session folder already exists
2025-05-25 23:35:51,636 - acp_backend.core.session_handler - WARNING - Sessions base directory ./test_acp_work_sessions does not exist or not a directory. Returning empty list.
2025-05-25 23:35:51,658 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..id/'
2025-05-25 23:35:51,671 - acp_backend.core.session_handler - WARNING - Cannot update session. Manifest not found for session_id: non_existent_for_update_ok_id
2025-05-25 23:35:51,673 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..update..id/'
2025-05-25 23:35:51,678 - acp_backend.core.session_handler - WARNING - Attempted to delete session i_dont_exist_for_delete_ok_id, but folder ./test_acp_work_sessions/i_dont_exist_for_delete_ok_id does not exist.
2025-05-25 23:35:51,680 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid/delete/id'
2025-05-25 23:35:51,682 - acp_backend.core.session_handler - ERROR - Attempted to delete session file_masquerading_as_session_ok_id, but path ./test_acp_work_sessions/file_masquerading_as_session_ok_id is not a directory.
2025-05-25 23:35:51,684 - acp_backend.core.session_handler - ERROR - Error deleting session folder ./test_acp_work_sessions/os_error_delete_session_ok_id for session os_error_delete_session_ok_id: Disk full
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 199, in delete_session
    shutil.rmtree(session_folder)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Disk full
2025-05-25 23:36:38,491 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:36:38,811 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-25 23:36:38,863 - acp_backend.core.agent_config_handler - ERROR - Error reading/decoding global agent config '1f66adaa-4121-4955-b2c2-4cd4516f5fd8' from /tmp/pytest-of-g/pytest-18/test_corrupted_json_file0/_test_global_agent_configs/1f66adaa-4121-4955-b2c2-4cd4516f5fd8.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 98, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-25 23:36:38,867 - acp_backend.core.agent_config_handler - ERROR - Mismatch: agent_id in file != requested for global agent 1df1e34c-f5f5-4731-80cb-76c85689d543. Path: /tmp/pytest-of-g/pytest-18/test_mismatched_agent_id_in_fi0/_test_global_agent_configs/1df1e34c-f5f5-4731-80cb-76c85689d543.json
2025-05-25 23:36:38,888 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='..', normalized='..'.
2025-05-25 23:36:38,890 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='../another_session', normalized='../another_session'.
2025-05-25 23:36:38,893 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='/../another_session', normalized='../another_session'.
2025-05-25 23:36:38,896 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='folder/../../../../etc/passwd', normalized='../../../etc/passwd'.
2025-05-25 23:36:38,905 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory ./test_acp_work_sessions: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 25, in __init__
    os.makedirs(self.sessions_base_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-25 23:36:38,918 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 12345678-1234-1234-1234-1234567890ab at ./test_acp_work_sessions/12345678-1234-1234-1234-1234567890ab/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 77, in create_session
    json.dump(session_data.model_dump(mode="json"), f, indent=4)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-25 23:36:38,922 - acp_backend.core.session_handler - ERROR - Session folder ./test_acp_work_sessions/abcdef01-abcd-ef01-abcd-ef0123456789 already exists for new UUID abcdef01-abcd-ef01-abcd-ef0123456789. This is highly unlikely.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 56, in create_session
    os.makedirs(session_folder, exist_ok=False)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1232, in _execute_mock_call
    raise result
FileExistsError: Session folder already exists
2025-05-25 23:36:38,925 - acp_backend.core.session_handler - WARNING - Sessions base directory ./test_acp_work_sessions does not exist or not a directory. Returning empty list.
2025-05-25 23:36:38,949 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..id/'
2025-05-25 23:36:38,962 - acp_backend.core.session_handler - WARNING - Cannot update session. Manifest not found for session_id: non_existent_for_update_ok_id
2025-05-25 23:36:38,964 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..update..id/'
2025-05-25 23:36:38,969 - acp_backend.core.session_handler - WARNING - Attempted to delete session i_dont_exist_for_delete_ok_id, but folder ./test_acp_work_sessions/i_dont_exist_for_delete_ok_id does not exist.
2025-05-25 23:36:38,971 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid/delete/id'
2025-05-25 23:36:38,973 - acp_backend.core.session_handler - ERROR - Attempted to delete session file_masquerading_as_session_ok_id, but path ./test_acp_work_sessions/file_masquerading_as_session_ok_id is not a directory.
2025-05-25 23:36:38,976 - acp_backend.core.session_handler - ERROR - Error deleting session folder ./test_acp_work_sessions/os_error_delete_session_ok_id for session os_error_delete_session_ok_id: Disk full
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 199, in delete_session
    shutil.rmtree(session_folder)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Disk full
2025-05-25 23:36:56,740 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:36:57,053 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-25 23:36:57,098 - acp_backend.core.agent_config_handler - ERROR - Error reading/decoding global agent config '329a3f53-3c15-45f8-a34f-7dbebe193e2f' from /tmp/pytest-of-g/pytest-19/test_corrupted_json_file0/_test_global_agent_configs/329a3f53-3c15-45f8-a34f-7dbebe193e2f.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 98, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-25 23:36:57,104 - acp_backend.core.agent_config_handler - ERROR - Mismatch: agent_id in file != requested for global agent 02e2243c-d5fc-4b3b-8371-3782e0ca5818. Path: /tmp/pytest-of-g/pytest-19/test_mismatched_agent_id_in_fi0/_test_global_agent_configs/02e2243c-d5fc-4b3b-8371-3782e0ca5818.json
2025-05-25 23:36:57,125 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='..', normalized='..'.
2025-05-25 23:36:57,127 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='../another_session', normalized='../another_session'.
2025-05-25 23:36:57,129 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='/../another_session', normalized='../another_session'.
2025-05-25 23:36:57,132 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='folder/../../../../etc/passwd', normalized='../../../etc/passwd'.
2025-05-25 23:36:57,141 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory ./test_acp_work_sessions: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 25, in __init__
    os.makedirs(self.sessions_base_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-25 23:36:57,154 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 12345678-1234-1234-1234-1234567890ab at ./test_acp_work_sessions/12345678-1234-1234-1234-1234567890ab/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 77, in create_session
    json.dump(session_data.model_dump(mode="json"), f, indent=4)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-25 23:36:57,158 - acp_backend.core.session_handler - ERROR - Session folder ./test_acp_work_sessions/abcdef01-abcd-ef01-abcd-ef0123456789 already exists for new UUID abcdef01-abcd-ef01-abcd-ef0123456789. This is highly unlikely.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 56, in create_session
    os.makedirs(session_folder, exist_ok=False)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1232, in _execute_mock_call
    raise result
FileExistsError: Session folder already exists
2025-05-25 23:36:57,162 - acp_backend.core.session_handler - WARNING - Sessions base directory ./test_acp_work_sessions does not exist or not a directory. Returning empty list.
2025-05-25 23:36:57,187 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..id/'
2025-05-25 23:36:57,204 - acp_backend.core.session_handler - WARNING - Cannot update session. Manifest not found for session_id: non_existent_for_update_ok_id
2025-05-25 23:36:57,206 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..update..id/'
2025-05-25 23:36:57,211 - acp_backend.core.session_handler - WARNING - Attempted to delete session i_dont_exist_for_delete_ok_id, but folder ./test_acp_work_sessions/i_dont_exist_for_delete_ok_id does not exist.
2025-05-25 23:36:57,213 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid/delete/id'
2025-05-25 23:36:57,216 - acp_backend.core.session_handler - ERROR - Attempted to delete session file_masquerading_as_session_ok_id, but path ./test_acp_work_sessions/file_masquerading_as_session_ok_id is not a directory.
2025-05-25 23:36:57,218 - acp_backend.core.session_handler - ERROR - Error deleting session folder ./test_acp_work_sessions/os_error_delete_session_ok_id for session os_error_delete_session_ok_id: Disk full
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 199, in delete_session
    shutil.rmtree(session_folder)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Disk full
2025-05-25 23:37:16,882 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:37:17,034 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-25 23:37:17,077 - acp_backend.core.agent_config_handler - ERROR - Error reading/decoding global agent config 'ae613f3b-f962-4c36-b5c0-f4fed45f9a74' from /tmp/pytest-of-g/pytest-20/test_corrupted_json_file0/_test_global_agent_configs/ae613f3b-f962-4c36-b5c0-f4fed45f9a74.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 98, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-25 23:37:17,083 - acp_backend.core.agent_config_handler - ERROR - Mismatch: agent_id in file != requested for global agent d43e6498-88d8-486a-9268-bdb99109de8f. Path: /tmp/pytest-of-g/pytest-20/test_mismatched_agent_id_in_fi0/_test_global_agent_configs/d43e6498-88d8-486a-9268-bdb99109de8f.json
2025-05-25 23:37:17,102 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='..', normalized='..'.
2025-05-25 23:37:17,105 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='../another_session', normalized='../another_session'.
2025-05-25 23:37:17,108 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='/../another_session', normalized='../another_session'.
2025-05-25 23:37:17,110 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='folder/../../../../etc/passwd', normalized='../../../etc/passwd'.
2025-05-25 23:37:17,117 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory ./test_acp_work_sessions: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 25, in __init__
    os.makedirs(self.sessions_base_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-25 23:37:17,137 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 12345678-1234-1234-1234-1234567890ab at ./test_acp_work_sessions/12345678-1234-1234-1234-1234567890ab/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 77, in create_session
    json.dump(session_data.model_dump(mode="json"), f, indent=4)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-25 23:37:17,142 - acp_backend.core.session_handler - ERROR - Session folder ./test_acp_work_sessions/abcdef01-abcd-ef01-abcd-ef0123456789 already exists for new UUID abcdef01-abcd-ef01-abcd-ef0123456789. This is highly unlikely.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 56, in create_session
    os.makedirs(session_folder, exist_ok=False)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1232, in _execute_mock_call
    raise result
FileExistsError: Session folder already exists
2025-05-25 23:37:17,147 - acp_backend.core.session_handler - WARNING - Sessions base directory ./test_acp_work_sessions does not exist or not a directory. Returning empty list.
2025-05-25 23:37:17,175 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..id/'
2025-05-25 23:37:17,187 - acp_backend.core.session_handler - WARNING - Cannot update session. Manifest not found for session_id: non_existent_for_update_ok_id
2025-05-25 23:37:17,190 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..update..id/'
2025-05-25 23:37:17,195 - acp_backend.core.session_handler - WARNING - Attempted to delete session i_dont_exist_for_delete_ok_id, but folder ./test_acp_work_sessions/i_dont_exist_for_delete_ok_id does not exist.
2025-05-25 23:37:17,197 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid/delete/id'
2025-05-25 23:37:17,199 - acp_backend.core.session_handler - ERROR - Attempted to delete session file_masquerading_as_session_ok_id, but path ./test_acp_work_sessions/file_masquerading_as_session_ok_id is not a directory.
2025-05-25 23:37:17,201 - acp_backend.core.session_handler - ERROR - Error deleting session folder ./test_acp_work_sessions/os_error_delete_session_ok_id for session os_error_delete_session_ok_id: Disk full
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 199, in delete_session
    shutil.rmtree(session_folder)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Disk full
2025-05-25 23:38:08,366 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:38:08,800 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-25 23:38:08,841 - acp_backend.core.agent_config_handler - ERROR - Error reading/decoding global agent config '42bf4a3d-be3c-402f-a860-f29cf7964ec4' from /tmp/pytest-of-g/pytest-21/test_corrupted_json_file0/_test_global_agent_configs/42bf4a3d-be3c-402f-a860-f29cf7964ec4.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 98, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-25 23:38:08,845 - acp_backend.core.agent_config_handler - ERROR - Mismatch: agent_id in file != requested for global agent 7e23c479-c3e0-4312-b470-6f88e90000df. Path: /tmp/pytest-of-g/pytest-21/test_mismatched_agent_id_in_fi0/_test_global_agent_configs/7e23c479-c3e0-4312-b470-6f88e90000df.json
2025-05-25 23:38:08,865 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='..', normalized='..'.
2025-05-25 23:38:08,867 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='../another_session', normalized='../another_session'.
2025-05-25 23:38:08,869 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='/../another_session', normalized='../another_session'.
2025-05-25 23:38:08,872 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='folder/../../../../etc/passwd', normalized='../../../etc/passwd'.
2025-05-25 23:38:08,880 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory ./test_acp_work_sessions: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 25, in __init__
    os.makedirs(self.sessions_base_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-25 23:38:08,894 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 12345678-1234-1234-1234-1234567890ab at ./test_acp_work_sessions/12345678-1234-1234-1234-1234567890ab/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 77, in create_session
    json.dump(session_data.model_dump(mode="json"), f, indent=4)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-25 23:38:08,898 - acp_backend.core.session_handler - ERROR - Session folder ./test_acp_work_sessions/abcdef01-abcd-ef01-abcd-ef0123456789 already exists for new UUID abcdef01-abcd-ef01-abcd-ef0123456789. This is highly unlikely.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 56, in create_session
    os.makedirs(session_folder, exist_ok=False)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1232, in _execute_mock_call
    raise result
FileExistsError: Session folder already exists
2025-05-25 23:38:08,901 - acp_backend.core.session_handler - WARNING - Sessions base directory ./test_acp_work_sessions does not exist or not a directory. Returning empty list.
2025-05-25 23:38:08,924 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..id/'
2025-05-25 23:38:08,938 - acp_backend.core.session_handler - WARNING - Cannot update session. Manifest not found for session_id: non_existent_for_update_ok_id
2025-05-25 23:38:08,941 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..update..id/'
2025-05-25 23:38:08,945 - acp_backend.core.session_handler - WARNING - Attempted to delete session i_dont_exist_for_delete_ok_id, but folder ./test_acp_work_sessions/i_dont_exist_for_delete_ok_id does not exist.
2025-05-25 23:38:08,947 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid/delete/id'
2025-05-25 23:38:08,949 - acp_backend.core.session_handler - ERROR - Attempted to delete session file_masquerading_as_session_ok_id, but path ./test_acp_work_sessions/file_masquerading_as_session_ok_id is not a directory.
2025-05-25 23:38:08,951 - acp_backend.core.session_handler - ERROR - Error deleting session folder ./test_acp_work_sessions/os_error_delete_session_ok_id for session os_error_delete_session_ok_id: Disk full
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 199, in delete_session
    shutil.rmtree(session_folder)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Disk full
2025-05-25 23:39:02,348 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:39:02,808 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-25 23:39:02,855 - acp_backend.core.agent_config_handler - ERROR - Error reading/decoding global agent config 'f0a3b9a1-38d6-420f-b138-85623de1badf' from /tmp/pytest-of-g/pytest-22/test_corrupted_json_file0/_test_global_agent_configs/f0a3b9a1-38d6-420f-b138-85623de1badf.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 98, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-25 23:39:02,860 - acp_backend.core.agent_config_handler - ERROR - Mismatch: agent_id in file != requested for global agent 40161246-30d1-4756-856d-75e991564a58. Path: /tmp/pytest-of-g/pytest-22/test_mismatched_agent_id_in_fi0/_test_global_agent_configs/40161246-30d1-4756-856d-75e991564a58.json
2025-05-25 23:39:02,883 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='..', normalized='..'.
2025-05-25 23:39:02,887 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='../another_session', normalized='../another_session'.
2025-05-25 23:39:02,890 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='/../another_session', normalized='../another_session'.
2025-05-25 23:39:02,893 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='folder/../../../../etc/passwd', normalized='../../../etc/passwd'.
2025-05-25 23:39:02,904 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory ./test_acp_work_sessions: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 25, in __init__
    os.makedirs(self.sessions_base_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-25 23:39:02,922 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 12345678-1234-1234-1234-1234567890ab at ./test_acp_work_sessions/12345678-1234-1234-1234-1234567890ab/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 77, in create_session
    json.dump(session_data.model_dump(mode="json"), f, indent=4)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-25 23:39:02,928 - acp_backend.core.session_handler - ERROR - Session folder ./test_acp_work_sessions/abcdef01-abcd-ef01-abcd-ef0123456789 already exists for new UUID abcdef01-abcd-ef01-abcd-ef0123456789. This is highly unlikely.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 56, in create_session
    os.makedirs(session_folder, exist_ok=False)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1232, in _execute_mock_call
    raise result
FileExistsError: Session folder already exists
2025-05-25 23:39:02,931 - acp_backend.core.session_handler - WARNING - Sessions base directory ./test_acp_work_sessions does not exist or not a directory. Returning empty list.
2025-05-25 23:39:02,956 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..id/'
2025-05-25 23:39:02,971 - acp_backend.core.session_handler - WARNING - Cannot update session. Manifest not found for session_id: non_existent_for_update_ok_id
2025-05-25 23:39:02,972 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..update..id/'
2025-05-25 23:39:02,976 - acp_backend.core.session_handler - WARNING - Attempted to delete session i_dont_exist_for_delete_ok_id, but folder ./test_acp_work_sessions/i_dont_exist_for_delete_ok_id does not exist.
2025-05-25 23:39:02,978 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid/delete/id'
2025-05-25 23:39:02,980 - acp_backend.core.session_handler - ERROR - Attempted to delete session file_masquerading_as_session_ok_id, but path ./test_acp_work_sessions/file_masquerading_as_session_ok_id is not a directory.
2025-05-25 23:39:02,983 - acp_backend.core.session_handler - ERROR - Error deleting session folder ./test_acp_work_sessions/os_error_delete_session_ok_id for session os_error_delete_session_ok_id: Disk full
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 199, in delete_session
    shutil.rmtree(session_folder)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Disk full
2025-05-25 23:39:52,881 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:39:53,086 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-25 23:39:53,131 - acp_backend.core.agent_config_handler - ERROR - Error reading/decoding global agent config 'f2ebcaea-012c-48ce-8384-f6d5f6ebcdc3' from /tmp/pytest-of-g/pytest-23/test_corrupted_json_file0/_test_global_agent_configs/f2ebcaea-012c-48ce-8384-f6d5f6ebcdc3.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 98, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-25 23:39:53,136 - acp_backend.core.agent_config_handler - ERROR - Mismatch: agent_id in file != requested for global agent d0cd1317-4e99-4f36-815f-7d1b7f788aed. Path: /tmp/pytest-of-g/pytest-23/test_mismatched_agent_id_in_fi0/_test_global_agent_configs/d0cd1317-4e99-4f36-815f-7d1b7f788aed.json
2025-05-25 23:39:53,156 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='..', normalized='..'.
2025-05-25 23:39:53,158 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='../another_session', normalized='../another_session'.
2025-05-25 23:39:53,161 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='/../another_session', normalized='../another_session'.
2025-05-25 23:39:53,163 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='folder/../../../../etc/passwd', normalized='../../../etc/passwd'.
2025-05-25 23:39:53,171 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory ./test_acp_work_sessions: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 25, in __init__
    os.makedirs(self.sessions_base_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-25 23:39:53,191 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 12345678-1234-1234-1234-1234567890ab at ./test_acp_work_sessions/12345678-1234-1234-1234-1234567890ab/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 77, in create_session
    json.dump(session_data.model_dump(mode="json"), f, indent=4)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-25 23:39:53,196 - acp_backend.core.session_handler - ERROR - Session folder ./test_acp_work_sessions/abcdef01-abcd-ef01-abcd-ef0123456789 already exists for new UUID abcdef01-abcd-ef01-abcd-ef0123456789. This is highly unlikely.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 56, in create_session
    os.makedirs(session_folder, exist_ok=False)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1232, in _execute_mock_call
    raise result
FileExistsError: Session folder already exists
2025-05-25 23:39:53,198 - acp_backend.core.session_handler - WARNING - Sessions base directory ./test_acp_work_sessions does not exist or not a directory. Returning empty list.
2025-05-25 23:39:53,221 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..id/'
2025-05-25 23:39:53,234 - acp_backend.core.session_handler - WARNING - Cannot update session. Manifest not found for session_id: non_existent_for_update_ok_id
2025-05-25 23:39:53,236 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..update..id/'
2025-05-25 23:39:53,241 - acp_backend.core.session_handler - WARNING - Attempted to delete session i_dont_exist_for_delete_ok_id, but folder ./test_acp_work_sessions/i_dont_exist_for_delete_ok_id does not exist.
2025-05-25 23:39:53,243 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid/delete/id'
2025-05-25 23:39:53,245 - acp_backend.core.session_handler - ERROR - Attempted to delete session file_masquerading_as_session_ok_id, but path ./test_acp_work_sessions/file_masquerading_as_session_ok_id is not a directory.
2025-05-25 23:39:53,248 - acp_backend.core.session_handler - ERROR - Error deleting session folder ./test_acp_work_sessions/os_error_delete_session_ok_id for session os_error_delete_session_ok_id: Disk full
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 199, in delete_session
    shutil.rmtree(session_folder)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Disk full
2025-05-25 23:41:02,504 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:41:02,738 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-25 23:41:02,788 - acp_backend.core.agent_config_handler - ERROR - Error reading/decoding global agent config 'cab97173-e874-494b-8b2d-bc2c80b091f5' from /tmp/pytest-of-g/pytest-24/test_corrupted_json_file0/_test_global_agent_configs/cab97173-e874-494b-8b2d-bc2c80b091f5.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 98, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-25 23:41:02,792 - acp_backend.core.agent_config_handler - ERROR - Mismatch: agent_id in file != requested for global agent 8cc4811e-afe6-4c4e-9309-1cc6632725f6. Path: /tmp/pytest-of-g/pytest-24/test_mismatched_agent_id_in_fi0/_test_global_agent_configs/8cc4811e-afe6-4c4e-9309-1cc6632725f6.json
2025-05-25 23:41:02,809 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='..', normalized='..'.
2025-05-25 23:41:02,812 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='../another_session', normalized='../another_session'.
2025-05-25 23:41:02,814 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='/../another_session', normalized='../another_session'.
2025-05-25 23:41:02,816 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='folder/../../../../etc/passwd', normalized='../../../etc/passwd'.
2025-05-25 23:41:02,825 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory ./test_acp_work_sessions: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 25, in __init__
    os.makedirs(self.sessions_base_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-25 23:41:02,838 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 12345678-1234-1234-1234-1234567890ab at ./test_acp_work_sessions/12345678-1234-1234-1234-1234567890ab/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 77, in create_session
    json.dump(session_data.model_dump(mode="json"), f, indent=4)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-25 23:41:02,843 - acp_backend.core.session_handler - ERROR - Session folder ./test_acp_work_sessions/abcdef01-abcd-ef01-abcd-ef0123456789 already exists for new UUID abcdef01-abcd-ef01-abcd-ef0123456789. This is highly unlikely.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 56, in create_session
    os.makedirs(session_folder, exist_ok=False)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1232, in _execute_mock_call
    raise result
FileExistsError: Session folder already exists
2025-05-25 23:41:02,846 - acp_backend.core.session_handler - WARNING - Sessions base directory ./test_acp_work_sessions does not exist or not a directory. Returning empty list.
2025-05-25 23:41:02,872 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..id/'
2025-05-25 23:41:02,885 - acp_backend.core.session_handler - WARNING - Cannot update session. Manifest not found for session_id: non_existent_for_update_ok_id
2025-05-25 23:41:02,887 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..update..id/'
2025-05-25 23:41:02,892 - acp_backend.core.session_handler - WARNING - Attempted to delete session i_dont_exist_for_delete_ok_id, but folder ./test_acp_work_sessions/i_dont_exist_for_delete_ok_id does not exist.
2025-05-25 23:41:02,894 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid/delete/id'
2025-05-25 23:41:02,896 - acp_backend.core.session_handler - ERROR - Attempted to delete session file_masquerading_as_session_ok_id, but path ./test_acp_work_sessions/file_masquerading_as_session_ok_id is not a directory.
2025-05-25 23:41:02,899 - acp_backend.core.session_handler - ERROR - Error deleting session folder ./test_acp_work_sessions/os_error_delete_session_ok_id for session os_error_delete_session_ok_id: Disk full
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 199, in delete_session
    shutil.rmtree(session_folder)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Disk full
2025-05-25 23:42:49,769 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:42:49,985 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-25 23:42:50,031 - acp_backend.core.agent_config_handler - ERROR - Error reading/decoding global agent config '8a684434-0491-4374-923e-8aa0d1e31ee9' from /tmp/pytest-of-g/pytest-25/test_corrupted_json_file0/_test_global_agent_configs/8a684434-0491-4374-923e-8aa0d1e31ee9.json: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 98, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-25 23:42:50,036 - acp_backend.core.agent_config_handler - ERROR - Mismatch: agent_id in file != requested for global agent f08da6b1-5bab-4397-aacf-9e435836b7ac. Path: /tmp/pytest-of-g/pytest-25/test_mismatched_agent_id_in_fi0/_test_global_agent_configs/f08da6b1-5bab-4397-aacf-9e435836b7ac.json
2025-05-25 23:42:50,054 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='..', normalized='..'.
2025-05-25 23:42:50,057 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='../another_session', normalized='../another_session'.
2025-05-25 23:42:50,059 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='/../another_session', normalized='../another_session'.
2025-05-25 23:42:50,062 - acp_backend.core.fs_manager - ERROR - Path traversal attempt (post-normalization): session_id='test-fs-session-001', relative_path='folder/../../../../etc/passwd', normalized='../../../etc/passwd'.
2025-05-25 23:42:50,070 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory ./test_acp_work_sessions: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 25, in __init__
    os.makedirs(self.sessions_base_dir, exist_ok=True)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-25 23:42:50,084 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 12345678-1234-1234-1234-1234567890ab at ./test_acp_work_sessions/12345678-1234-1234-1234-1234567890ab/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 77, in create_session
    json.dump(session_data.model_dump(mode="json"), f, indent=4)
    ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-25 23:42:50,088 - acp_backend.core.session_handler - ERROR - Session folder ./test_acp_work_sessions/abcdef01-abcd-ef01-abcd-ef0123456789 already exists for new UUID abcdef01-abcd-ef01-abcd-ef0123456789. This is highly unlikely.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 56, in create_session
    os.makedirs(session_folder, exist_ok=False)
    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1232, in _execute_mock_call
    raise result
FileExistsError: Session folder already exists
2025-05-25 23:42:50,091 - acp_backend.core.session_handler - WARNING - Sessions base directory ./test_acp_work_sessions does not exist or not a directory. Returning empty list.
2025-05-25 23:42:50,116 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..id/'
2025-05-25 23:42:50,127 - acp_backend.core.session_handler - WARNING - Cannot update session. Manifest not found for session_id: non_existent_for_update_ok_id
2025-05-25 23:42:50,129 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid..update..id/'
2025-05-25 23:42:50,134 - acp_backend.core.session_handler - WARNING - Attempted to delete session i_dont_exist_for_delete_ok_id, but folder ./test_acp_work_sessions/i_dont_exist_for_delete_ok_id does not exist.
2025-05-25 23:42:50,136 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'invalid/delete/id'
2025-05-25 23:42:50,139 - acp_backend.core.session_handler - ERROR - Attempted to delete session file_masquerading_as_session_ok_id, but path ./test_acp_work_sessions/file_masquerading_as_session_ok_id is not a directory.
2025-05-25 23:42:50,142 - acp_backend.core.session_handler - ERROR - Error deleting session folder ./test_acp_work_sessions/os_error_delete_session_ok_id for session os_error_delete_session_ok_id: Disk full
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 199, in delete_session
    shutil.rmtree(session_folder)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Disk full
2025-05-25 23:43:48,485 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:44:34,447 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:45:45,189 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:46:41,212 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:47:33,525 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:48:43,886 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:49:50,573 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:50:39,480 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:51:37,833 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:53:13,091 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:54:14,087 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:56:23,241 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-25 23:56:23,334 - acp_backend.core.agent_config_handler - WARNING - Session '9e213f77-8b60-41e3-8315-fabe47928c30' not found. Cannot operate on local agent configs.
2025-05-25 23:58:38,258 - acp_backend.main - CRITICAL - Failed to initialize LLM Service module: name 'Path' is not defined. This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 55, in <module>
    from acp_backend.routers import llm_service as llm_service_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/llm_service.py", line 8, in <module>
    from acp_backend.core.llm_manager import llm_manager
  File "/home/g/Ai/AiCockpit/acp_backend/core/__init__.py", line 4, in <module>
    from acp_backend.core.fs_manager import fs_manager # fs_manager.py creates 'fs_manager'
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 8, in <module>
    from acp_backend.core.session_handler import session_handler # To get session data root
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 215, in <module>
    session_handler = SessionHandler()
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 31, in __init__
    Path(self.sessions_base_dir).mkdir(parents=True, exist_ok=True)
    ^^^^
NameError: name 'Path' is not defined
2025-05-25 23:58:38,267 - acp_backend.main - CRITICAL - Failed to initialize Agents module: name 'Path' is not defined. This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
  File "/home/g/Ai/AiCockpit/acp_backend/core/__init__.py", line 4, in <module>
    from acp_backend.core.fs_manager import fs_manager # fs_manager.py creates 'fs_manager'
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 8, in <module>
    from acp_backend.core.session_handler import session_handler # To get session data root
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 215, in <module>
    session_handler = SessionHandler()
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 31, in __init__
    Path(self.sessions_base_dir).mkdir(parents=True, exist_ok=True)
    ^^^^
NameError: name 'Path' is not defined
2025-05-25 23:58:38,269 - acp_backend.main - CRITICAL - Failed to initialize Work Sessions module: name 'Path' is not defined. This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 87, in <module>
    from acp_backend.routers import work_sessions as work_sessions_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_sessions.py", line 6, in <module>
    from acp_backend.core.session_handler import session_handler
  File "/home/g/Ai/AiCockpit/acp_backend/core/__init__.py", line 4, in <module>
    from acp_backend.core.fs_manager import fs_manager # fs_manager.py creates 'fs_manager'
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 8, in <module>
    from acp_backend.core.session_handler import session_handler # To get session data root
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 215, in <module>
    session_handler = SessionHandler()
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 31, in __init__
    Path(self.sessions_base_dir).mkdir(parents=True, exist_ok=True)
    ^^^^
NameError: name 'Path' is not defined
2025-05-25 23:58:38,272 - acp_backend.main - CRITICAL - Failed to initialize WorkBoard module: name 'Path' is not defined. This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 103, in <module>
    from acp_backend.routers import work_board as work_board_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_board.py", line 6, in <module>
    from acp_backend.core.fs_manager import fs_manager
  File "/home/g/Ai/AiCockpit/acp_backend/core/__init__.py", line 4, in <module>
    from acp_backend.core.fs_manager import fs_manager # fs_manager.py creates 'fs_manager'
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 8, in <module>
    from acp_backend.core.session_handler import session_handler # To get session data root
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 215, in <module>
    session_handler = SessionHandler()
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 31, in __init__
    Path(self.sessions_base_dir).mkdir(parents=True, exist_ok=True)
    ^^^^
NameError: name 'Path' is not defined
2025-05-26 00:10:42,583 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-26 00:10:42,841 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-26 00:10:42,888 - acp_backend.core.agent_config_handler - ERROR - Error getting global agent 0621553d-cc78-459c-92f4-8dd3e2f36281: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 91, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-26 00:10:42,892 - acp_backend.core.agent_config_handler - ERROR - ID mismatch for global 42ed28a2-597c-4474-aed2-91762373f0c5
2025-05-26 00:10:43,374 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for ec2b5110-38d0-41f5-a8d2-a7d545204280 at test_acp_work_sessions_handler_tests/ec2b5110-38d0-41f5-a8d2-a7d545204280/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 79, in create_session
    with open(manifest_path_str, "w", encoding="utf-8") as f:
         ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-26 00:10:43,419 - acp_backend.core.session_handler - WARNING - Manifest not found for update: d26497e2-454f-4b04-9ea9-8bc874d9f11c
2025-05-26 00:10:43,424 - acp_backend.core.session_handler - WARNING - Delete: Session folder test_acp_work_sessions_handler_tests/a0d83587-f7a1-466f-9ede-5265bb62304e not found.
2025-05-26 00:10:43,427 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: '../escape'
2025-05-26 00:10:43,427 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'path/slash'
2025-05-26 00:10:43,427 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'path\slash'
2025-05-26 00:10:43,427 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: ''
2025-05-26 00:12:02,351 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-26 00:12:02,623 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-26 00:12:02,672 - acp_backend.core.agent_config_handler - ERROR - Error getting global agent 9dec7214-d33f-4278-926d-ff156298856c: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 91, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-26 00:12:02,677 - acp_backend.core.agent_config_handler - ERROR - ID mismatch for global d2a83570-28df-4298-abe5-7dea3e23cafa
2025-05-26 00:12:02,861 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 738cdcfe-b346-4210-bfff-9c8241a923e8 at test_acp_work_sessions_handler_tests/738cdcfe-b346-4210-bfff-9c8241a923e8/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 79, in create_session
    with open(manifest_path_str, "w", encoding="utf-8") as f:
         ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-26 00:12:02,907 - acp_backend.core.session_handler - WARNING - Manifest not found for update: 8e442e12-3c1c-4c80-bca1-ede97a48bcae
2025-05-26 00:12:02,912 - acp_backend.core.session_handler - WARNING - Delete: Session folder test_acp_work_sessions_handler_tests/4b29f296-1940-497d-a2a1-079487b99c98 not found.
2025-05-26 00:12:02,914 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: '../escape'
2025-05-26 00:12:02,914 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'path/slash'
2025-05-26 00:12:02,914 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'path\slash'
2025-05-26 00:12:02,915 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: ''
2025-05-26 00:13:22,584 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-26 00:13:23,032 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-26 00:13:23,076 - acp_backend.core.agent_config_handler - ERROR - Error getting global agent 5177acbd-d9a4-4a9c-9bdb-e056b1ad1e2e: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 91, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-26 00:13:23,081 - acp_backend.core.agent_config_handler - ERROR - ID mismatch for global e4e31009-5a12-48f9-a5cc-8b9dc5294934
2025-05-26 00:13:23,258 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 688629bc-2f38-4b69-9542-9f8027a8589b at test_acp_work_sessions_handler_tests/688629bc-2f38-4b69-9542-9f8027a8589b/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 79, in create_session
    with open(manifest_path_str, "w", encoding="utf-8") as f:
         ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-26 00:13:23,299 - acp_backend.core.session_handler - WARNING - Manifest not found for update: 909b934b-25e4-4810-a1ae-e03956df6078
2025-05-26 00:13:23,304 - acp_backend.core.session_handler - WARNING - Delete: Session folder test_acp_work_sessions_handler_tests/46d29d1c-f964-43e8-b2fa-dff9f6160dfc not found.
2025-05-26 00:13:23,306 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: '../escape'
2025-05-26 00:13:23,306 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'path/slash'
2025-05-26 00:13:23,306 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'path\slash'
2025-05-26 00:13:23,306 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: ''
2025-05-26 00:15:38,745 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-26 00:15:38,750 - acp_backend.main - CRITICAL - Failed to initialize WorkBoard module: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 103, in <module>
    from acp_backend.routers import work_board as work_board_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_board.py", line 6, in <module>
    from acp_backend.core.fs_manager import fs_manager
ImportError: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py)
2025-05-26 00:15:38,998 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-26 00:15:39,047 - acp_backend.core.agent_config_handler - ERROR - Error getting global agent 38dfdd50-8d7d-4176-89f6-53b341345cb3: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 91, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-26 00:15:39,053 - acp_backend.core.agent_config_handler - ERROR - ID mismatch for global 6086d96a-975e-435e-a60a-aaff2e13c932
2025-05-26 00:15:39,081 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 36e4d684-30ac-42c8-84f7-2dbec0e00cfa at test_acp_work_sessions_handler_tests/36e4d684-30ac-42c8-84f7-2dbec0e00cfa/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 79, in create_session
    with open(manifest_path_str, "w", encoding="utf-8") as f:
         ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-26 00:15:39,122 - acp_backend.core.session_handler - WARNING - Manifest not found for update: 3f7438be-5f64-476a-afad-f87986588f96
2025-05-26 00:15:39,126 - acp_backend.core.session_handler - WARNING - Delete: Session folder test_acp_work_sessions_handler_tests/c5923e7e-6790-46a7-827c-7534035b0833 not found.
2025-05-26 00:15:39,129 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: '../escape'
2025-05-26 00:15:39,129 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'path/slash'
2025-05-26 00:15:39,129 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'path\slash'
2025-05-26 00:15:39,129 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: ''
2025-05-26 00:19:57,766 - acp_backend.main - CRITICAL - Failed to initialize LLM Service module: name 'FileNode' is not defined. This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 55, in <module>
    from acp_backend.routers import llm_service as llm_service_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/llm_service.py", line 8, in <module>
    from acp_backend.core.llm_manager import llm_manager
  File "/home/g/Ai/AiCockpit/acp_backend/core/__init__.py", line 9, in <module>
    from acp_backend.core.fs_manager import FileSystemManager # Class
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 14, in <module>
    class FileSystemManager:
    ...<140 lines>...
            except (OSError, IOError) as e: raise IOError(f"Could not move '{source_relative_path}' to '{destination_relative_path}': {e}") from e
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 61, in FileSystemManager
    async def list_dir(self, session_id: str, relative_path: str = ".") -> List[FileNode]:
                                                                                ^^^^^^^^
NameError: name 'FileNode' is not defined
2025-05-26 00:19:57,772 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-26 00:19:57,778 - acp_backend.main - CRITICAL - Failed to initialize WorkBoard module: name 'FileNode' is not defined. This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 103, in <module>
    from acp_backend.routers import work_board as work_board_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_board.py", line 6, in <module>
    from acp_backend.core.fs_manager import fs_manager
  File "/home/g/Ai/AiCockpit/acp_backend/core/__init__.py", line 9, in <module>
    from acp_backend.core.fs_manager import FileSystemManager # Class
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 14, in <module>
    class FileSystemManager:
    ...<140 lines>...
            except (OSError, IOError) as e: raise IOError(f"Could not move '{source_relative_path}' to '{destination_relative_path}': {e}") from e
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 61, in FileSystemManager
    async def list_dir(self, session_id: str, relative_path: str = ".") -> List[FileNode]:
                                                                                ^^^^^^^^
NameError: name 'FileNode' is not defined
2025-05-26 00:21:19,621 - acp_backend.main - CRITICAL - Failed to initialize LLM Service module: name 'FileNode' is not defined. This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 55, in <module>
    from acp_backend.routers import llm_service as llm_service_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/llm_service.py", line 8, in <module>
    from acp_backend.core.llm_manager import llm_manager
  File "/home/g/Ai/AiCockpit/acp_backend/core/__init__.py", line 9, in <module>
    from acp_backend.core.fs_manager import FileSystemManager # Class
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 14, in <module>
    class FileSystemManager:
    ...<140 lines>...
            except (OSError, IOError) as e: raise IOError(f"Could not move '{source_relative_path}' to '{destination_relative_path}': {e}") from e
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 61, in FileSystemManager
    async def list_dir(self, session_id: str, relative_path: str = ".") -> List[FileNode]:
                                                                                ^^^^^^^^
NameError: name 'FileNode' is not defined
2025-05-26 00:21:19,625 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-26 00:21:19,630 - acp_backend.main - CRITICAL - Failed to initialize WorkBoard module: name 'FileNode' is not defined. This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 103, in <module>
    from acp_backend.routers import work_board as work_board_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_board.py", line 6, in <module>
    from acp_backend.core.fs_manager import fs_manager
  File "/home/g/Ai/AiCockpit/acp_backend/core/__init__.py", line 9, in <module>
    from acp_backend.core.fs_manager import FileSystemManager # Class
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 14, in <module>
    class FileSystemManager:
    ...<140 lines>...
            except (OSError, IOError) as e: raise IOError(f"Could not move '{source_relative_path}' to '{destination_relative_path}': {e}") from e
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 61, in FileSystemManager
    async def list_dir(self, session_id: str, relative_path: str = ".") -> List[FileNode]:
                                                                                ^^^^^^^^
NameError: name 'FileNode' is not defined
2025-05-26 00:22:26,648 - acp_backend.main - CRITICAL - Failed to initialize LLM Service module: name 'FileNode' is not defined. This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 55, in <module>
    from acp_backend.routers import llm_service as llm_service_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/llm_service.py", line 8, in <module>
    from acp_backend.core.llm_manager import llm_manager
  File "/home/g/Ai/AiCockpit/acp_backend/core/__init__.py", line 9, in <module>
    from acp_backend.core.fs_manager import FileSystemManager # Class
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 14, in <module>
    class FileSystemManager:
    ...<140 lines>...
            except (OSError, IOError) as e: raise IOError(f"Could not move '{source_relative_path}' to '{destination_relative_path}': {e}") from e
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 61, in FileSystemManager
    async def list_dir(self, session_id: str, relative_path: str = ".") -> List[FileNode]:
                                                                                ^^^^^^^^
NameError: name 'FileNode' is not defined
2025-05-26 00:22:26,653 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-26 00:22:26,658 - acp_backend.main - CRITICAL - Failed to initialize WorkBoard module: name 'FileNode' is not defined. This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 103, in <module>
    from acp_backend.routers import work_board as work_board_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_board.py", line 6, in <module>
    from acp_backend.core.fs_manager import fs_manager
  File "/home/g/Ai/AiCockpit/acp_backend/core/__init__.py", line 9, in <module>
    from acp_backend.core.fs_manager import FileSystemManager # Class
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 14, in <module>
    class FileSystemManager:
    ...<140 lines>...
            except (OSError, IOError) as e: raise IOError(f"Could not move '{source_relative_path}' to '{destination_relative_path}': {e}") from e
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 61, in FileSystemManager
    async def list_dir(self, session_id: str, relative_path: str = ".") -> List[FileNode]:
                                                                                ^^^^^^^^
NameError: name 'FileNode' is not defined
2025-05-26 00:23:33,320 - acp_backend.main - CRITICAL - Failed to initialize LLM Service module: name 'FileNode' is not defined. This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 55, in <module>
    from acp_backend.routers import llm_service as llm_service_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/llm_service.py", line 8, in <module>
    from acp_backend.core.llm_manager import llm_manager
  File "/home/g/Ai/AiCockpit/acp_backend/core/__init__.py", line 9, in <module>
    from acp_backend.core.fs_manager import FileSystemManager # Class
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 14, in <module>
    class FileSystemManager:
    ...<140 lines>...
            except (OSError, IOError) as e: raise IOError(f"Could not move '{source_relative_path}' to '{destination_relative_path}': {e}") from e
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 61, in FileSystemManager
    async def list_dir(self, session_id: str, relative_path: str = ".") -> List[FileNode]:
                                                                                ^^^^^^^^
NameError: name 'FileNode' is not defined
2025-05-26 00:23:33,325 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-26 00:23:33,329 - acp_backend.main - CRITICAL - Failed to initialize WorkBoard module: name 'FileNode' is not defined. This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 103, in <module>
    from acp_backend.routers import work_board as work_board_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_board.py", line 6, in <module>
    from acp_backend.core.fs_manager import fs_manager
  File "/home/g/Ai/AiCockpit/acp_backend/core/__init__.py", line 9, in <module>
    from acp_backend.core.fs_manager import FileSystemManager # Class
    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 14, in <module>
    class FileSystemManager:
    ...<140 lines>...
            except (OSError, IOError) as e: raise IOError(f"Could not move '{source_relative_path}' to '{destination_relative_path}': {e}") from e
  File "/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py", line 61, in FileSystemManager
    async def list_dir(self, session_id: str, relative_path: str = ".") -> List[FileNode]:
                                                                                ^^^^^^^^
NameError: name 'FileNode' is not defined
2025-05-26 00:24:25,030 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-26 00:24:25,035 - acp_backend.main - CRITICAL - Failed to initialize WorkBoard module: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 103, in <module>
    from acp_backend.routers import work_board as work_board_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_board.py", line 6, in <module>
    from acp_backend.core.fs_manager import fs_manager
ImportError: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py)
2025-05-26 00:24:25,297 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-26 00:24:25,344 - acp_backend.core.agent_config_handler - ERROR - Error getting global agent e86f8006-ec78-4452-8076-6089faa051cf: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 91, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-26 00:24:25,348 - acp_backend.core.agent_config_handler - ERROR - ID mismatch for global 8e9a6e5c-b2fe-423c-9417-86db2b0452e0
2025-05-26 00:24:25,379 - acp_backend.core.fs_manager - ERROR - Path traversal: session='test_session_for_fs_unit', rel='../another_session'. Resolved to '/tmp/pytest-of-g/pytest-42/fs_manager_module_sessions_unit0/test_session_for_fs_unit/another_session' outside '/tmp/pytest-of-g/pytest-42/fs_manager_module_sessions_unit0/test_session_for_fs_unit/data'.
2025-05-26 00:24:25,401 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for f32d3b46-9124-469a-aa57-e0b2463326ec at test_acp_work_sessions_handler_tests/f32d3b46-9124-469a-aa57-e0b2463326ec/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 79, in create_session
    with open(manifest_path_str, "w", encoding="utf-8") as f:
         ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-26 00:24:25,445 - acp_backend.core.session_handler - WARNING - Manifest not found for update: 002feab9-74b1-47b1-b9db-ed86d1e11eb3
2025-05-26 00:24:25,451 - acp_backend.core.session_handler - WARNING - Delete: Session folder test_acp_work_sessions_handler_tests/1fc13e6f-e469-4908-9257-954a001009d3 not found.
2025-05-26 00:24:25,453 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: '../escape'
2025-05-26 00:24:25,453 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'path/slash'
2025-05-26 00:24:25,453 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'path\slash'
2025-05-26 00:24:25,453 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: ''
2025-05-26 00:26:14,171 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 10, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-26 00:26:14,176 - acp_backend.main - CRITICAL - Failed to initialize WorkBoard module: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 103, in <module>
    from acp_backend.routers import work_board as work_board_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_board.py", line 6, in <module>
    from acp_backend.core.fs_manager import fs_manager
ImportError: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py)
2025-05-26 00:26:14,396 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save' not found. Cannot operate on local agent configs.
2025-05-26 00:26:14,442 - acp_backend.core.agent_config_handler - ERROR - Error getting global agent 4875a78f-8144-4099-99dc-6c9ca0532d59: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 91, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-26 00:26:14,447 - acp_backend.core.agent_config_handler - ERROR - ID mismatch for global f091970f-5c31-493c-9df5-ef6d23e76913
2025-05-26 00:26:14,482 - acp_backend.core.fs_manager - ERROR - Path traversal: session='test_session_for_fs_unit', rel='../another_session'. Resolved to '/tmp/pytest-of-g/pytest-43/fs_manager_module_sessions_unit0/test_session_for_fs_unit/another_session' outside '/tmp/pytest-of-g/pytest-43/fs_manager_module_sessions_unit0/test_session_for_fs_unit/data'.
2025-05-26 00:26:14,496 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory /tmp/pytest-of-g/pytest-43/test_session_handler_init_fail0/sh_init_failure: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 29, in __init__
    Path(self.sessions_base_dir).mkdir(parents=True, exist_ok=True) # Now Path is defined
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-26 00:26:14,506 - acp_backend.core.session_handler - ERROR - Failed to write session manifest for 53fb7495-0e66-472b-bfea-ff99773aacf2 at test_acp_work_sessions_handler_tests/53fb7495-0e66-472b-bfea-ff99773aacf2/session_manifest.json: Failed to write manifest
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 79, in create_session
    with open(manifest_path_str, "w", encoding="utf-8") as f:
         ~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Failed to write manifest
2025-05-26 00:26:14,552 - acp_backend.core.session_handler - WARNING - Manifest not found for update: 5e985fcb-3dda-4da0-a6de-99f6a203c696
2025-05-26 00:26:14,556 - acp_backend.core.session_handler - WARNING - Delete: Session folder test_acp_work_sessions_handler_tests/c06aa519-6e31-4949-857f-1361d6b7fc5b not found.
2025-05-26 00:26:14,558 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: '../escape'
2025-05-26 00:26:14,559 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'path/slash'
2025-05-26 00:26:14,559 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: 'path\slash'
2025-05-26 00:26:14,559 - acp_backend.core.session_handler - ERROR - Invalid session_id format attempt: ''
2025-05-26 00:27:37,547 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 11, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-26 00:27:37,551 - acp_backend.main - CRITICAL - Failed to initialize WorkBoard module: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 103, in <module>
    from acp_backend.routers import work_board as work_board_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_board.py", line 6, in <module>
    from acp_backend.core.fs_manager import fs_manager
ImportError: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py)
2025-05-26 00:31:45,142 - acp_backend.main - CRITICAL - Failed to initialize LLM Service module: cannot import name 'llm_manager' from 'acp_backend.core.llm_manager' (/home/g/Ai/AiCockpit/acp_backend/core/llm_manager.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 55, in <module>
    from acp_backend.routers import llm_service as llm_service_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/llm_service.py", line 8, in <module>
    from acp_backend.core.llm_manager import llm_manager
ImportError: cannot import name 'llm_manager' from 'acp_backend.core.llm_manager' (/home/g/Ai/AiCockpit/acp_backend/core/llm_manager.py)
2025-05-26 00:31:45,144 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 11, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-26 00:31:45,144 - acp_backend.main - CRITICAL - Failed to initialize Work Sessions module: cannot import name 'session_handler' from 'acp_backend.core.session_handler' (/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 87, in <module>
    from acp_backend.routers import work_sessions as work_sessions_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_sessions.py", line 6, in <module>
    from acp_backend.core.session_handler import session_handler
ImportError: cannot import name 'session_handler' from 'acp_backend.core.session_handler' (/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py)
2025-05-26 00:31:45,145 - acp_backend.main - CRITICAL - Failed to initialize WorkBoard module: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 103, in <module>
    from acp_backend.routers import work_board as work_board_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_board.py", line 6, in <module>
    from acp_backend.core.fs_manager import fs_manager
ImportError: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py)
2025-05-26 00:32:38,298 - acp_backend.main - CRITICAL - Failed to initialize LLM Service module: cannot import name 'llm_manager' from 'acp_backend.core.llm_manager' (/home/g/Ai/AiCockpit/acp_backend/core/llm_manager.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 55, in <module>
    from acp_backend.routers import llm_service as llm_service_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/llm_service.py", line 8, in <module>
    from acp_backend.core.llm_manager import llm_manager
ImportError: cannot import name 'llm_manager' from 'acp_backend.core.llm_manager' (/home/g/Ai/AiCockpit/acp_backend/core/llm_manager.py)
2025-05-26 00:32:38,300 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 11, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-26 00:32:38,300 - acp_backend.main - CRITICAL - Failed to initialize Work Sessions module: cannot import name 'session_handler' from 'acp_backend.core.session_handler' (/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 87, in <module>
    from acp_backend.routers import work_sessions as work_sessions_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_sessions.py", line 6, in <module>
    from acp_backend.core.session_handler import session_handler
ImportError: cannot import name 'session_handler' from 'acp_backend.core.session_handler' (/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py)
2025-05-26 00:32:38,301 - acp_backend.main - CRITICAL - Failed to initialize WorkBoard module: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 103, in <module>
    from acp_backend.routers import work_board as work_board_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_board.py", line 6, in <module>
    from acp_backend.core.fs_manager import fs_manager
ImportError: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py)
2025-05-26 00:33:47,934 - acp_backend.main - CRITICAL - Failed to initialize LLM Service module: cannot import name 'llm_manager' from 'acp_backend.core.llm_manager' (/home/g/Ai/AiCockpit/acp_backend/core/llm_manager.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 55, in <module>
    from acp_backend.routers import llm_service as llm_service_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/llm_service.py", line 8, in <module>
    from acp_backend.core.llm_manager import llm_manager
ImportError: cannot import name 'llm_manager' from 'acp_backend.core.llm_manager' (/home/g/Ai/AiCockpit/acp_backend/core/llm_manager.py)
2025-05-26 00:33:47,935 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 11, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-26 00:33:47,935 - acp_backend.main - CRITICAL - Failed to initialize Work Sessions module: cannot import name 'session_handler' from 'acp_backend.core.session_handler' (/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 87, in <module>
    from acp_backend.routers import work_sessions as work_sessions_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_sessions.py", line 6, in <module>
    from acp_backend.core.session_handler import session_handler
ImportError: cannot import name 'session_handler' from 'acp_backend.core.session_handler' (/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py)
2025-05-26 00:33:47,936 - acp_backend.main - CRITICAL - Failed to initialize WorkBoard module: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 103, in <module>
    from acp_backend.routers import work_board as work_board_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_board.py", line 6, in <module>
    from acp_backend.core.fs_manager import fs_manager
ImportError: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py)
2025-05-26 00:33:49,369 - acp_backend.core.fs_manager - ERROR - Path traversal: session='test_session_for_fs_unit', rel='../another_session'. Resolved to '/tmp/pytest-of-g/pytest-45/fs_manager_module_sessions_unit0/test_session_for_fs_unit/another_session' outside '/tmp/pytest-of-g/pytest-45/fs_manager_module_sessions_unit0/test_session_for_fs_unit/data'.
2025-05-26 00:33:49,383 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory /tmp/pytest-of-g/pytest-45/test_session_handler_init_fail0/sh_init_failure: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 29, in __init__
    Path(self.sessions_base_dir).mkdir(parents=True, exist_ok=True)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-26 00:35:31,366 - acp_backend.main - CRITICAL - Failed to initialize LLM Service module: cannot import name 'llm_manager' from 'acp_backend.core.llm_manager' (/home/g/Ai/AiCockpit/acp_backend/core/llm_manager.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 55, in <module>
    from acp_backend.routers import llm_service as llm_service_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/llm_service.py", line 8, in <module>
    from acp_backend.core.llm_manager import llm_manager
ImportError: cannot import name 'llm_manager' from 'acp_backend.core.llm_manager' (/home/g/Ai/AiCockpit/acp_backend/core/llm_manager.py)
2025-05-26 00:35:31,368 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 11, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-26 00:35:31,369 - acp_backend.main - CRITICAL - Failed to initialize Work Sessions module: cannot import name 'session_handler' from 'acp_backend.core.session_handler' (/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 87, in <module>
    from acp_backend.routers import work_sessions as work_sessions_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_sessions.py", line 6, in <module>
    from acp_backend.core.session_handler import session_handler
ImportError: cannot import name 'session_handler' from 'acp_backend.core.session_handler' (/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py)
2025-05-26 00:35:31,370 - acp_backend.main - CRITICAL - Failed to initialize WorkBoard module: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 103, in <module>
    from acp_backend.routers import work_board as work_board_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_board.py", line 6, in <module>
    from acp_backend.core.fs_manager import fs_manager
ImportError: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py)
2025-05-26 00:35:31,600 - acp_backend.core.agent_config_handler - WARNING - Session 'non_existent_session_for_save_ach' not found. Cannot operate on local agent configs.
2025-05-26 00:35:31,642 - acp_backend.core.agent_config_handler - ERROR - Error getting global agent b6d067bf-b48a-4a1c-bf59-5f9daeeaaaa5: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/agent_config_handler.py", line 85, in get_global_agent_config
    with open(file_path, "r", encoding="utf-8") as f: data = json.load(f)
                                                             ~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/__init__.py", line 293, in load
    return loads(fp.read(),
        cls=cls, object_hook=object_hook,
        parse_float=parse_float, parse_int=parse_int,
        parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)
  File "/usr/lib/python3.13/json/__init__.py", line 346, in loads
    return _default_decoder.decode(s)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^
  File "/usr/lib/python3.13/json/decoder.py", line 345, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())
               ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/json/decoder.py", line 361, in raw_decode
    obj, end = self.scan_once(s, idx)
               ~~~~~~~~~~~~~~^^^^^^^^
json.decoder.JSONDecodeError: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
2025-05-26 00:35:31,647 - acp_backend.core.agent_config_handler - ERROR - ID mismatch for global f2d14685-899f-4ffe-9a92-c6ed18349917
2025-05-26 00:35:31,678 - acp_backend.core.fs_manager - ERROR - Path traversal: session='test_session_for_fs_unit', rel='../another_session'. Resolved to '/tmp/pytest-of-g/pytest-46/fs_manager_module_sessions_unit0/test_session_for_fs_unit/another_session' outside '/tmp/pytest-of-g/pytest-46/fs_manager_module_sessions_unit0/test_session_for_fs_unit/data'.
2025-05-26 00:35:31,688 - acp_backend.core.session_handler - CRITICAL - Failed to create base sessions directory /tmp/pytest-of-g/pytest-46/test_session_handler_init_fail0/sh_init_failure: Init Permission denied
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py", line 29, in __init__
    Path(self.sessions_base_dir).mkdir(parents=True, exist_ok=True)
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1169, in __call__
    return self._mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1173, in _mock_call
    return self._execute_mock_call(*args, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.13/unittest/mock.py", line 1228, in _execute_mock_call
    raise effect
OSError: Init Permission denied
2025-05-26 00:37:14,394 - acp_backend.main - INFO - System module is enabled. Importing system router.
2025-05-26 00:37:14,396 - acp_backend.main - CRITICAL - Failed to initialize LLM Service module: cannot import name 'llm_manager' from 'acp_backend.core.llm_manager' (/home/g/Ai/AiCockpit/acp_backend/core/llm_manager.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 55, in <module>
    from acp_backend.routers import llm_service as llm_service_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/llm_service.py", line 8, in <module>
    from acp_backend.core.llm_manager import llm_manager
ImportError: cannot import name 'llm_manager' from 'acp_backend.core.llm_manager' (/home/g/Ai/AiCockpit/acp_backend/core/llm_manager.py)
2025-05-26 00:37:14,397 - acp_backend.main - CRITICAL - Failed to initialize Agents module: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 71, in <module>
    from acp_backend.routers import agents as agents_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/agents.py", line 11, in <module>
    from acp_backend.core.agent_executor import agent_executor
ImportError: cannot import name 'agent_executor' from 'acp_backend.core.agent_executor' (/home/g/Ai/AiCockpit/acp_backend/core/agent_executor.py)
2025-05-26 00:37:14,405 - acp_backend.main - CRITICAL - Failed to initialize Work Sessions module: cannot import name 'session_handler' from 'acp_backend.core.session_handler' (/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 88, in <module>
    from acp_backend.core.session_handler import session_handler as session_handler_import
ImportError: cannot import name 'session_handler' from 'acp_backend.core.session_handler' (/home/g/Ai/AiCockpit/acp_backend/core/session_handler.py)
2025-05-26 00:37:14,406 - acp_backend.main - CRITICAL - Failed to initialize WorkBoard module: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py). This module will be disabled.
Traceback (most recent call last):
  File "/home/g/Ai/AiCockpit/acp_backend/main.py", line 103, in <module>
    from acp_backend.routers import work_board as work_board_router_import
  File "/home/g/Ai/AiCockpit/acp_backend/routers/work_board.py", line 6, in <module>
    from acp_backend.core.fs_manager import fs_manager
ImportError: cannot import name 'fs_manager' from 'acp_backend.core.fs_manager' (/home/g/Ai/AiCockpit/acp_backend/core/fs_manager.py)
